<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projects - Mukasafa Creative</title>

    <!-- Bootstrap 5.3 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="projectstyle.css">
    <!-- Custom Navbar CSS -->
    <link rel="stylesheet" href="navbar.css">
</head>

<body>
    <!-- ========== NAVBAR ========== -->
    <header>
        <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
            <div class="container">
                <a class="navbar-brand fw-bold" href="/index.html" aria-label="Halaman Utama">FALAH</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item"><a class="nav-link" href="/index.html" aria-label="Beranda">Home</a></li>
                        <li class="nav-item"><a class="nav-link" href="/index.html#resume"
                                aria-label="Riwayat">Resume</a></li>
                        <li class="nav-item"><a class="nav-link active" href="/projects.html"
                                aria-label="Proyek">Projects</a></li>
                        <li class="nav-item"><a class="nav-link" href="/index.html#contact"
                                aria-label="Kontak">Contact</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <!-- Hero Slider -->
    <section class="project-hero">
        <div id="projectCarousel" class="carousel slide carousel-fade" data-bs-ride="carousel" data-bs-interval="8000">
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img src="https://images.unsplash.com/photo-1542744173-8e7e53415bb0?ixlib=rb-1.2.1&auto=format&fit=crop&w=1920&h=600&q=80"
                        class="d-block w-100" alt="Creative team working on design project">
                    <div class="carousel-caption d-none d-md-block">
                        <h2>Creative Design Solutions</h2>
                        <p>Bringing your vision to life with professional expertise</p>
                    </div>
                </div>
                <div class="carousel-item">
                    <img src="https://images.unsplash.com/photo-1522542550221-31fd19575a2d?ixlib=rb-1.2.1&auto=format&fit=crop&w=1920&h=600&q=80"
                        class="d-block w-100" alt="Photography equipment setup">
                    <div class="carousel-caption d-none d-md-block">
                        <h2>Professional Photography</h2>
                        <p>Capturing moments with precision and artistic vision</p>
                    </div>
                </div>
                <div class="carousel-item">
                    <img src="https://images.unsplash.com/photo-1551434678-e076c223a692?ixlib=rb-1.2.1&auto=format&fit=crop&w=1920&h=600&q=80"
                        class="d-block w-100" alt="Video production team">
                    <div class="carousel-caption d-none d-md-block">
                        <h2>Video Production</h2>
                        <p>Telling your story through compelling visuals</p>
                    </div>
                </div>
                <div class="carousel-item">
                    <img src="https://images.unsplash.com/photo-1611162616475-46b635cb6868?ixlib=rb-1.2.1&auto=format&fit=crop&w=1920&h=600&q=80"
                        class="d-block w-100" alt="Graphic design workspace">
                    <div class="carousel-caption d-none d-md-block">
                        <h2>Graphic Design Excellence</h2>
                        <p>Creating visuals that communicate and inspire</p>
                    </div>
                </div>
                <div class="carousel-item">
                    <img src="https://images.unsplash.com/photo-1600132806370-bf17e65e942f?ixlib=rb-1.2.1&auto=format&fit=crop&w=1920&h=600&q=80"
                        class="d-block w-100" alt="Motion graphics workspace">
                    <div class="carousel-caption d-none d-md-block">
                        <h2>Motion Graphics</h2>
                        <p>Adding movement and life to your brand</p>
                    </div>
                </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#projectCarousel" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#projectCarousel" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
            <div class="carousel-indicators">
                <button type="button" data-bs-target="#projectCarousel" data-bs-slide-to="0" class="active"
                    aria-current="true" aria-label="Slide 1"></button>
                <button type="button" data-bs-target="#projectCarousel" data-bs-slide-to="1"
                    aria-label="Slide 2"></button>
                <button type="button" data-bs-target="#projectCarousel" data-bs-slide-to="2"
                    aria-label="Slide 3"></button>
                <button type="button" data-bs-target="#projectCarousel" data-bs-slide-to="3"
                    aria-label="Slide 4"></button>
                <button type="button" data-bs-target="#projectCarousel" data-bs-slide-to="4"
                    aria-label="Slide 5"></button>
            </div>
        </div>
    </section>

    <!-- Project Catalog -->
    <section class="py-5">
        <div class="container">
            <div class="row mb-4">
                <div class="col-md-6">
                    <h2>Project Gallery</h2>
                </div>
                <div class="col-md-6 text-end">
                    <div class="btn-group">
                        <button class="btn btn-outline-secondary dropdown-toggle" type="button"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            Filter by Category
                        </button>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#" data-filter="all">All</a></li>
                            <li><a class="dropdown-item" href="#" data-filter="design">Graphic Design</a></li>
                            <li><a class="dropdown-item" href="#" data-filter="motion">Motion Graphic</a></li>
                            <li><a class="dropdown-item" href="#" data-filter="photo">Photography</a></li>
                            <li><a class="dropdown-item" href="#" data-filter="video">Videography</a></li>
                        </ul>

                        <button class="btn btn-outline-secondary" type="button" data-sort="newest">Newest</button>
                        <button class="btn btn-outline-secondary" type="button" data-sort="oldest">Oldest</button>
                    </div>
                </div>
            </div>

            <div class="row g-4 project-grid" id="projectGrid">
                <!-- Project items akan diisi via JavaScript -->
            </div>
        </div>
    </section>

    <!-- Testimoni Section -->
    <section class="py-5 bg-light">
        <div class="container">
            <h2 class="text-center mb-5">Client Testimonials</h2>

            <div class="row g-4 testimoni-list">
                <!-- Testimoni yang sudah di-approve -->
                <div class="col-md-4">
                    <div class="testimoni-card bg-white p-4 shadow">
                        <div class="rating-stars mb-2">
                            ⭐⭐⭐⭐⭐
                        </div>
                        <p class="mb-3">"Hasil desainnya sangat profesional dan melebihi ekspektasi!"</p>
                        <h5 class="mb-0">John Doe</h5>
                        <small class="text-muted">CEO Tech Startup</small>
                    </div>
                </div>
                <!-- Tambahkan lebih banyak testimoni -->
            </div>
        </div>
    </section>

    <!-- Tambahkan Ulasan Section -->
    <section class="py-5">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-8">
                    <div class="card shadow">
                        <div class="card-body">
                            <h3 class="text-center mb-4">Tambahkan Ulasan</h3>

                            <form id="testimoniForm">
                                <div class="mb-3">
                                    <label for="name" class="form-label">Nama</label>
                                    <input type="text" id="name" name="name" class="form-control" required>
                                </div>

                                <div class="mb-3">
                                    <label for="email" class="form-label">Email</label>
                                    <input type="email" id="email" name="email" class="form-control" required>
                                </div>

                                <div class="mb-3">
                                    <label for="rating" class="form-label">Rating</label>
                                    <select id="rating" name="rating" class="form-select" required>
                                        <option value="5">⭐⭐⭐⭐⭐</option>
                                        <option value="4">⭐⭐⭐⭐</option>
                                        <option value="3">⭐⭐⭐</option>
                                        <option value="2">⭐⭐</option>
                                        <option value="1">⭐</option>
                                    </select>
                                </div>

                                <div class="mb-3">
                                    <label for="testimonial" class="form-label">Ulasan</label>
                                    <textarea id="testimonial" name="testimonial" class="form-control" rows="4"
                                        required></textarea>
                                </div>

                                <div class="text-center">
                                    <button type="submit" class="btn btn-primary">
                                        <span class="submit-text">Kirim Ulasan</span>
                                        <span class="spinner-border spinner-border-sm d-none"></span>
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <div class="alert alert-info mt-4 d-none" id="approvalNotice">
                        Ulasan Anda akan muncul setelah melalui proses verifikasi
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="py-4 bg-dark text-white">
        <div class="container text-center">
            <p class="mb-0">&copy; 2023 Mukasafa Creative. All rights reserved.</p>
        </div>
    </footer>

    <!-- Script -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <!-- Navbar JS -->
    <script src="navbar.js"></script>

    <script>
        // Pastikan carousel bergeser dengan mulus
        document.addEventListener('DOMContentLoaded', function () {
            // Konfigurasi carousel untuk slide horizontal
            var myCarousel = document.getElementById('projectCarousel');
            var carousel = new bootstrap.Carousel(myCarousel, {
                interval: 3000,  // Ganti slide setiap 3 detik
                ride: 'carousel',  // Aktifkan autoplay
                pause: false,  // Tetap bergerak meskipun dihover
                wrap: true  // Kembali ke slide pertama setelah slide terakhir
            });

            // Memastikan transisi slide horizontal
            myCarousel.addEventListener('slide.bs.carousel', function (event) {
                // Tambahkan kelas khusus untuk transisi horizontal yang mulus
                event.relatedTarget.classList.add('carousel-item-next', 'carousel-item-start');
                event.target.classList.add('carousel-item-start');
            });

            myCarousel.addEventListener('slid.bs.carousel', function (event) {
                // Bersihkan kelas setelah slide selesai
                event.relatedTarget.classList.remove('carousel-item-next', 'carousel-item-start');
                event.target.classList.remove('carousel-item-start');
            });

            // Memulai carousel
            carousel.cycle();
        });



        // Testimoni Form Handler
        document.getElementById('testimoniForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const form = e.target;
            const submitBtn = form.querySelector('button[type="submit"]');
            const spinner = submitBtn.querySelector('.spinner-border');
            const submitText = submitBtn.querySelector('.submit-text');

            submitBtn.disabled = true;
            spinner.classList.remove('d-none');
            submitText.classList.add('d-none');

            try {
                await emailjs.sendForm(
                    'service_ixkuktm',
                    'template_zij3kkm',
                    form,
                    'kGxsbMLba6OdZ9Csx'
                );

                form.reset();
                document.getElementById('approvalNotice').classList.remove('d-none');
                setTimeout(() => {
                    document.getElementById('approvalNotice').classList.add('d-none');
                }, 5000);

            } catch (error) {
                console.error('Error:', error);
                alert('Gagal mengirim ulasan. Silakan coba lagi.');
            } finally {
                submitBtn.disabled = false;
                spinner.classList.add('d-none');
                submitText.classList.remove('d-none');
            }
        });

        // Project Filter Logic
        document.querySelectorAll('[data-filter]').forEach(btn => {
            btn.addEventListener('click', (e) => {
                e.preventDefault();
                const filter = btn.dataset.filter;
                filterProjects(filter);
            });
        });

        // Sort Logic
        document.querySelectorAll('[data-sort]').forEach(btn => {
            btn.addEventListener('click', () => {
                const sort = btn.dataset.sort;
                sortProjects(sort);
            });
        });

        function filterProjects(category) {
            const projects = document.querySelectorAll('.project-item');

            projects.forEach(project => {
                if (category === 'all' || project.dataset.category === category) {
                    project.style.display = 'block';
                } else {
                    project.style.display = 'none';
                }
            });
        }

        function sortProjects(order) {
            const projectsContainer = document.querySelector('.project-grid');
            const projects = Array.from(document.querySelectorAll('.project-item'));

            projects.sort((a, b) => {
                const dateA = new Date(a.dataset.date);
                const dateB = new Date(b.dataset.date);

                return order === 'newest' ? dateB - dateA : dateA - dateB;
            });

            projectsContainer.innerHTML = '';
            projects.forEach(project => {
                projectsContainer.appendChild(project);
            });
        }

        // Fetch projects dari Strapi API
        async function loadProjects() {
            try {
                const response = await fetch('http://localhost:1337/api/projects?populate=*');
                const { data } = await response.json();

                if (!data || !Array.isArray(data) || data.length === 0) {
                    document.getElementById('projectGrid').innerHTML = '<div class="col-12 text-center"><p>No projects found.</p></div>';
                    return;
                }

                const projectGrid = document.getElementById('projectGrid');
                projectGrid.innerHTML = '';

                data.forEach(project => {
                    const projectItem = document.createElement('div');
                    projectItem.className = 'col-md-4 mb-4 project-item';
                    projectItem.dataset.category = project.attributes.category;
                    projectItem.dataset.date = project.attributes.createdAt;

                    const coverImage = project.attributes.cover_image?.data?.attributes?.url || '';
                    const videoUrl = project.attributes.video_url || '';

                    projectItem.innerHTML = `
                        <div class="card h-100 shadow-sm">
                            ${videoUrl ? `
                                <div class="ratio ratio-16x9">
                                    <iframe 
                                        src="${convertToEmbedURL(videoUrl)}" 
                                        title="${project.attributes.title}"
                                        allowfullscreen
                                    ></iframe>
                                </div>
                            ` : `
                                <img 
                                    src="${coverImage ? coverImage : 'images/placeholder.jpg'}" 
                                    alt="${project.attributes.title}"
                                    class="card-img-top"
                                >
                            `}
                            
                            <div class="card-body">
                                <h5 class="card-title">${project.attributes.title}</h5>
                                <p class="card-text">${project.attributes.description}</p>
                                <span class="badge bg-primary">${project.attributes.category}</span>
                            </div>
                        </div>
                    `;

                    projectGrid.appendChild(projectItem);
                });

            } catch (error) {
                console.error('Error loading projects:', error);
                loadFallbackProjects();
            }
        }

        // Konversi URL YouTube ke embed
        function convertToEmbedURL(url) {
            if (!url || typeof url !== 'string') return '';

            const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;
            const match = url.match(regExp);
            const videoId = (match && match[2] && match[2].length === 11) ? match[2] : null;

            if (!videoId) return '';
            return `https://www.youtube.com/embed/${videoId}`;
        }

        // Fallback data jika API tidak tersedia
        function loadFallbackProjects() {
            const projectGrid = document.getElementById('projectGrid');

            const fallbackProjects = [
                {
                    title: 'Branding Redesign',
                    description: 'Redesign identitas visual untuk perusahaan lokal',
                    category: 'design',
                    image: 'images/img (1).jpg'
                },
                {
                    title: 'Product Photography',
                    description: 'Sesi foto produk untuk katalog e-commerce',
                    category: 'photo',
                    image: 'images/img (2).jpg'
                },
                {
                    title: 'Motion Graphics Intro',
                    description: 'Animasi intro untuk channel YouTube',
                    category: 'motion',
                    image: 'images/img (3).jpg',
                    videoUrl: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ'
                }
            ];

            projectGrid.innerHTML = '';

            fallbackProjects.forEach((project, index) => {
                const date = new Date();
                date.setDate(date.getDate() - index * 7);

                const projectItem = document.createElement('div');
                projectItem.className = 'col-md-4 mb-4 project-item';
                projectItem.dataset.category = project.category;
                projectItem.dataset.date = date.toISOString();

                projectItem.innerHTML = `
                    <div class="card h-100 shadow-sm">
                        ${project.videoUrl ? `
                            <div class="ratio ratio-16x9">
                                <iframe 
                                    src="${convertToEmbedURL(project.videoUrl)}" 
                                    title="${project.title}"
                                    allowfullscreen
                                ></iframe>
                            </div>
                        ` : `
                            <img 
                                src="${project.image}" 
                                alt="${project.title}"
                                class="card-img-top"
                            >
                        `}
                        
                        <div class="card-body">
                            <h5 class="card-title">${project.title}</h5>
                            <p class="card-text">${project.description}</p>
                            <span class="badge bg-primary">${project.category}</span>
                        </div>
                    </div>
                `;

                projectGrid.appendChild(projectItem);
            });
        }

        // Menjalankan fungsi load data
        window.addEventListener('DOMContentLoaded', () => {
            // Coba menggunakan fetch dengan timeout untuk memeriksa ketersediaan API
            const timeoutPromise = new Promise((_, reject) =>
                setTimeout(() => reject(new Error('Request timeout')), 3000)
            );

            Promise.race([
                fetch('http://localhost:1337/api/projects?populate=*'),
                timeoutPromise
            ])
                .then(response => {
                    if (!response.ok) {
                        throw new Error('API not available');
                    }
                    return loadProjects();
                })
                .catch(error => {
                    console.log('Using fallback data:', error.message);
                    loadFallbackProjects();
                });
        });
    </script>

    <script>
        // EmailJS Init
        (function () {
            emailjs.init('kGxsbMLba6OdZ9Csx');
        })();

        // Testimoni Form Handler
        document.getElementById('testimoniForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const form = e.target;
            const submitBtn = form.querySelector('button[type="submit"]');
            const spinner = submitBtn.querySelector('.spinner-border');
            const submitText = submitBtn.querySelector('.submit-text');

            submitBtn.disabled = true;
            spinner.classList.remove('d-none');
            submitText.classList.add('d-none');

            try {
                await emailjs.sendForm(
                    'service_ixkuktm',
                    'template_zij3kkm',
                    form,
                    'kGxsbMLba6OdZ9Csx'
                );

                form.reset();
                document.getElementById('approvalNotice').classList.remove('d-none');
                setTimeout(() => {
                    document.getElementById('approvalNotice').classList.add('d-none');
                }, 5000);

            } catch (error) {
                console.error('Error:', error);
                alert('Gagal mengirim ulasan. Silakan coba lagi.');
            } finally {
                submitBtn.disabled = false;
                spinner.classList.add('d-none');
                submitText.classList.remove('d-none');
            }
        });
    </script>

    <script>
        // Project Filter Logic
        document.querySelectorAll('[data-filter]').forEach(btn => {
            btn.addEventListener('click', (e) => {
                e.preventDefault();
                const filter = btn.dataset.filter;
                filterProjects(filter);
            });
        });

        // Sort Logic
        document.querySelectorAll('[data-sort]').forEach(btn => {
            btn.addEventListener('click', () => {
                const sort = btn.dataset.sort;
                sortProjects(sort);
            });
        });

        function filterProjects(category) {
            const projects = document.querySelectorAll('.project-item');

            projects.forEach(project => {
                if (category === 'all' || project.dataset.category === category) {
                    project.style.display = 'block';
                } else {
                    project.style.display = 'none';
                }
            });
        }

        function sortProjects(order) {
            const projectsContainer = document.querySelector('.project-grid');
            const projects = Array.from(document.querySelectorAll('.project-item'));

            projects.sort((a, b) => {
                const dateA = new Date(a.dataset.date);
                const dateB = new Date(b.dataset.date);

                return order === 'newest' ? dateB - dateA : dateA - dateB;
            });

            projectsContainer.innerHTML = '';
            projects.forEach(project => {
                projectsContainer.appendChild(project);
            });
        }
    </script>
    <script>
        async function loadProjects() {
            try {
                const response = await fetch('http://localhost:1337/api/projects?populate=*');
                const { data } = await response.json();

                if (!data || !Array.isArray(data) || data.length === 0) {
                    const projectGrid = document.getElementById('projectGrid');
                    projectGrid.innerHTML = `
                <div class="col-12 text-center">
                    <p class="alert alert-info">No projects found.</p>
                </div>
            `;
                    return;
                }

                const projectGrid = document.getElementById('projectGrid');
                projectGrid.innerHTML = '';

                data.forEach(project => {
                    const projectItem = document.createElement('div');
                    // Tambahkan 'mb-4' untuk margin bottom
                    projectItem.className = 'col-md-4 mb-4 project-item';
                    projectItem.dataset.category = project.attributes.category;
                    projectItem.dataset.date = project.attributes.createdAt;

                    // Gunakan optional chaining untuk cover image dan video url
                    const coverImage = project.attributes.cover_image?.data?.attributes?.url || 'images/placeholder.jpg';
                    const videoUrl = project.attributes.video_url || '';

                    projectItem.innerHTML = `
                <div class="card h-100 shadow-sm">
                    ${videoUrl ? `
                        <div class="ratio ratio-16x9">
                            <iframe 
                                src="${convertToEmbedURL(videoUrl)}" 
                                title="${project.attributes.title}" 
                                allowfullscreen
                            ></iframe>
                        </div>
                    ` : `
                        <img 
                            src="${coverImage}" 
                            alt="${project.attributes.title}"
                            class="card-img-top"
                        >
                    `}
                    
                    <div class="card-body">
                        <h5 class="card-title">${project.attributes.title}</h5>
                        <p class="card-text">${project.attributes.description}</p>
                        <span class="badge bg-primary">${project.attributes.category}</span>
                    </div>
                </div>
            `;

                    projectGrid.appendChild(projectItem);
                });

            } catch (error) {
                console.error('Error loading projects:', error);

                // Tambahkan pesan error yang lebih informatif
                const projectGrid = document.getElementById('projectGrid');
                projectGrid.innerHTML = `
            <div class="col-12 text-center">
                <div class="alert alert-danger">
                    <p>Unable to load projects. Please try again later.</p>
                    <small>${error.message}</small>
                </div>
            </div>
        `;

                // Tetap panggil fallback projects
                loadFallbackProjects();
            }
        }
    </script>

    <script>
        // Konversi URL YouTube ke embed
        function convertToEmbedURL(url) {
            if (!url || typeof url !== 'string') return '';

            const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;
            const match = url.match(regExp);
            const videoId = (match && match[2] && match[2].length === 11) ? match[2] : null;

            if (!videoId) return '';
            return `https://www.youtube.com/embed/${videoId}`;
        }
    </script>

    <script>
        // Fallback data jika API tidak tersedia
        function loadFallbackProjects() {
            const projectGrid = document.getElementById('projectGrid');

            const fallbackProjects = [
                {
                    title: 'Branding Redesign',
                    description: 'Redesign identitas visual untuk perusahaan lokal',
                    category: 'design',
                    image: 'images/img (1).jpg'
                },
                {
                    title: 'Product Photography',
                    description: 'Sesi foto produk untuk katalog e-commerce',
                    category: 'photo',
                    image: 'images/img (2).jpg'
                },
                {
                    title: 'Motion Graphics Intro',
                    description: 'Animasi intro untuk channel YouTube',
                    category: 'motion',
                    image: 'images/img (3).jpg',
                    videoUrl: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ'
                }
            ];

            projectGrid.innerHTML = '';

            fallbackProjects.forEach((project, index) => {
                const date = new Date();
                date.setDate(date.getDate() - index * 7);

                const projectItem = document.createElement('div');
                projectItem.className = 'col-md-4 mb-4 project-item';
                projectItem.dataset.category = project.category;
                projectItem.dataset.date = date.toISOString();

                projectItem.innerHTML = `
    <div class="card h-100 shadow-sm">
        ${project.videoUrl ? `
        <div class="ratio ratio-16x9">
            <iframe src="${convertToEmbedURL(project.videoUrl)}" title="${project.title}" allowfullscreen></iframe>
        </div>
        ` : `
        <img src="${project.image}" alt="${project.title}" class="card-img-top">
        `}

        <div class="card-body">
            <h5 class="card-title">${project.title}</h5>
            <p class="card-text">${project.description}</p>
            <span class="badge bg-primary">${project.category}</span>
        </div>
    </div>
    `;

                projectGrid.appendChild(projectItem);
            });
        }
    </script>

    <script>
        // Menjalankan fungsi load data
        window.addEventListener('DOMContentLoaded', () => {
            // Coba menggunakan fetch dengan timeout untuk memeriksa ketersediaan API
            const timeoutPromise = new Promise((_, reject) =>
                setTimeout(() => reject(new Error('Request timeout')), 3000)
            );

            Promise.race([
                fetch('http://localhost:1337/api/projects?populate=*'),
                timeoutPromise
            ])
                .then(response => {
                    if (!response.ok) {
                        throw new Error('API not available');
                    }
                    return loadProjects();
                })
                .catch(error => {
                    console.log('Using fallback data:', error.message);
                    loadFallbackProjects();
                });
        });
    </script>
</body>

</html>